#N canvas 39 23 1241 755 10;
#X obj 231 321 inlet;
#X obj 910 319 inlet;
#X obj 387 724 outlet~;
#X obj 323 321 inlet;
#X text 130 289 input to receive play;
#X text 364 19 This patch prepares and exectue the reading of an audio
file;
#X text 306 288 input to receive stop;
#X text 395 47 Play and retrig are executed until a stop message;
#X text 907 287 input to receive the file Name;
#X obj 666 511 tabread~ \$0-array;
#N canvas 56 23 1224 755 retrieve&StoreFileIntoAnArray 0;
#X obj 251 139 inlet;
#X obj 251 379 outlet;
#X obj 251 214 symbol;
#X msg 251 308 read -resize \$1 \$2;
#X obj 307 214 symbol \$0-array;
#X obj 251 252 pack s s;
#X obj 251 181 t a b;
#X text 249 108 input to receive the name of the file;
#X text 8 212 convert the fileName into a symbol;
#X text 429 211 name of the array (see arrayNameGenerator subpatch)
;
#X obj 251 344 soundfiler;
#X text 428 248 prepare retrieve&storeFile message;
#X text 428 308 retrieve&store Message;
#X text 430 383 Return the lenght of the file in samples as an output
;
#X text 431 22 To play an audio file we need to know the name of the
file to retreieve it and the name of the array to store it;
#X text 430 343 retrieve&store Object;
#N canvas 4 23 845 476 ArrayNameGenerator 0;
#X obj 57 58 loadbang;
#X obj 57 88 f \$0;
#X text 128 55 as soon as an instance of playAudioFile is created \,
this subpatch generates an individual random number \$0 that can be
used to name the array;
#X text 128 105 every time you call up the playAudioFile abstraction
\, a new number will be generated;
#X text 128 145 As a result \, each array in each playAudioFile abstractions
will have a unique name.;
#X connect 0 0 1 0;
#X restore 825 143 pd ArrayNameGenerator;
#X text 818 109 subPtach to generate the Array Name;
#X connect 0 0 6 0;
#X connect 2 0 5 0;
#X connect 3 0 10 0;
#X connect 4 0 5 1;
#X connect 5 0 3 0;
#X connect 6 0 2 0;
#X connect 6 1 4 0;
#X connect 10 0 1 0;
#X restore 910 391 pd retrieve&StoreFileIntoAnArray;
#X text 792 510 object to read the file stored into the Array;
#X text 666 148 << This is where we store the audiofile;
#X text 666 167 << This is an array;
#N canvas 0 22 450 278 (subpatch) 0;
#X array \$0-array 335999 float 2;
#X coords 0 -1 335999 1 200 140 2 0 0;
#X restore 442 112 graph;
#N canvas 669 389 450 300 fadeInFadeOut 0;
#X obj 111 43 inlet;
#X obj 126 188 outlet~;
#X obj 161 43 inlet;
#X text 94 22 FadeIn;
#X text 158 22 FadeOut;
#X obj 126 148 line~;
#X msg 161 88 0 50;
#X msg 111 88 1 0;
#X connect 0 0 7 0;
#X connect 2 0 6 0;
#X connect 5 0 1 0;
#X connect 6 0 5 0;
#X connect 7 0 5 0;
#X restore 231 512 pd fadeInFadeOut;
#X obj 387 682 *~;
#X text 701 286 input to receive pitch;
#X obj 231 449 t b b;
#N canvas 39 23 450 300 initializeVolume 0;
#X obj 21 29 loadbang;
#X obj 21 56 delay 1;
#X obj 21 112 outlet;
#X msg 21 80 0.25;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 3 0 2 0;
#X restore 521 430 pd initializeVolume;
#X text 58 511 fade to avoid audioClicks;
#N canvas 16 23 1264 755 playRetrig 0;
#X obj 627 50 inlet;
#X obj 280 49 inlet;
#X obj 627 590 outlet~;
#X text 590 623 Play instructions output;
#X floatatom 762 142 5 44100 192000 0 - - -;
#X text 678 123 SAMPLE RATE OF THE AUDIOFILE;
#N canvas 506 105 664 554 lenghtOfTheAudioFile 0;
#X obj 170 221 / 1000;
#X obj 149 248 / 44;
#X obj 129 295 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 120 173 5 0 0 0 - - -;
#X obj 120 221 i;
#X obj 153 195 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X floatatom 120 361 5 0 0 0 - - -;
#X obj 170 119 inlet;
#X text 169 96 SAMPLE RATE OF THE SOUND;
#X obj 120 119 inlet;
#X text 56 95 LENGHT (samples);
#X text 79 423 LENGHT(samples);
#X text 54 27 This patch calculate the lenght of the auiod file in
samples and ms, f 71;
#X obj 120 398 outlet;
#X text 234 423 LENGHT (freq);
#X obj 234 398 outlet;
#X obj 222 296 t b f;
#X text 185 263 ms;
#X obj 234 360 /;
#X msg 222 323 1000;
#X text 284 358 convert ms to freq;
#X connect 0 0 1 1;
#X connect 1 0 2 0;
#X connect 1 0 16 0;
#X connect 2 0 6 0;
#X connect 3 0 4 0;
#X connect 3 0 4 1;
#X connect 4 0 1 0;
#X connect 4 0 6 0;
#X connect 5 0 4 0;
#X connect 6 0 13 0;
#X connect 7 0 0 0;
#X connect 7 0 5 0;
#X connect 9 0 3 0;
#X connect 16 0 19 0;
#X connect 16 1 18 1;
#X connect 18 0 15 0;
#X connect 19 0 18 0;
#X restore 627 185 pd lenghtOfTheAudioFile;
#X text 627 23 AUDIOFILE LENGHT (samples);
#X obj 468 51 inlet;
#X text 465 23 PITCH Control Input;
#X text 631 206 samples;
#X obj 627 526 *~;
#X obj 762 460 phasor~;
#X text 257 24 RETRIG input;
#X msg 801 435 0;
#X obj 279 257 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 762 312 f;
#X obj 467 257 t b f;
#X obj 762 368 * 1;
#X text 768 210 freq (how fast the phasor should cycle to reproduce
the sample at the correct speed);
#X text 819 459 this phasor cycle at a certain speed through the array
where the audio file is stored;
#X text 791 313 the speed is stored in this object. So that can be
recalculated later according to a scale factor;
#X text 791 366 here we can apply a scale factor to change the playback
speed and (as a result) the pitch of the sound;
#X connect 0 0 6 0;
#X connect 1 0 15 0;
#X connect 4 0 6 1;
#X connect 6 0 11 0;
#X connect 6 1 16 0;
#X connect 8 0 17 0;
#X connect 11 0 2 0;
#X connect 12 0 11 1;
#X connect 14 0 12 1;
#X connect 15 0 14 0;
#X connect 16 0 18 0;
#X connect 17 0 16 0;
#X connect 17 1 18 1;
#X connect 18 0 12 0;
#X restore 666 464 pd playRetrig;
#X text 664 533 audio output;
#N canvas 801 121 450 300 scaleSliderBetween0&1 0;
#X obj 65 111 / 127;
#X obj 65 18 inlet;
#X obj 65 173 outlet;
#X text 141 44 avoid 0 value;
#X text 139 75 clip value to 127 (max slider value by default);
#X text 139 111 normalize between 0 and 1;
#X obj 65 77 clip 1 127;
#X text 139 141 add offset to change the pitch between (1 = default
pitch and 2 = two times the initial pitch);
#X obj 65 140 + 1;
#X obj 65 49 * 127;
#X connect 0 0 8 0;
#X connect 1 0 9 0;
#X connect 6 0 0 0;
#X connect 8 0 2 0;
#X connect 9 0 6 0;
#X restore 703 391 pd scaleSliderBetween0&1;
#X obj 522 599 *~;
#X obj 738 364 snapshot~;
#X obj 693 316 inlet~;
#X obj 759 341 metro 20;
#X obj 759 318 loadbang;
#X connect 0 0 18 0;
#X connect 1 0 10 0;
#X connect 3 0 15 1;
#X connect 9 0 24 1;
#X connect 10 0 21 2;
#X connect 15 0 16 0;
#X connect 16 0 2 0;
#X connect 18 0 15 0;
#X connect 18 1 21 0;
#X connect 19 0 24 0;
#X connect 21 0 9 0;
#X connect 23 0 21 1;
#X connect 24 0 16 1;
#X connect 25 0 23 0;
#X connect 26 0 25 0;
#X connect 27 0 25 0;
#X connect 28 0 27 0;
#X coords 0 755 1 754 201 140 0;
